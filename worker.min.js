!function(a){"use strict";var b=/^[ -~\t\n\r]+$/,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=function(a){var d,e,h,i,j,k,l,b="",m=0;for(f(a)&&(a=g(a));m<a.length;)d=a.charCodeAt(m++),e=a.charCodeAt(m++),h=a.charCodeAt(m++),i=d>>2,j=(3&d)<<4|e>>4,k=(15&e)<<2|h>>6,l=63&h,isNaN(e)?k=l=64:isNaN(h)&&(l=64),b+=c.charAt(i)+c.charAt(j)+c.charAt(k)+c.charAt(l);return b},e=function(a){for(var d,e,f,g,i,j,k,b="",l=0;l<a.length;)g=c.indexOf(a.charAt(l++)),i=c.indexOf(a.charAt(l++)),j=c.indexOf(a.charAt(l++)),k=c.indexOf(a.charAt(l++)),d=g<<2|i>>4,e=(15&i)<<4|j>>2,f=(3&j)<<6|k,b+=String.fromCharCode(d),64!=j&&(b+=String.fromCharCode(e)),64!=k&&(b+=String.fromCharCode(f));return h(b)},f=function(a){return!b.test(a)},g=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},h=function(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(e=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&e),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&e)<<6|63&f),c+=3);return b};a.onmessage=function(a){"encode"===a.data.op?postMessage({id:a.data.id,op:a.data.op,result:d(a.data.str)}):postMessage({id:a.data.id,op:a.data.op,result:e(a.data.str)})}}(this);